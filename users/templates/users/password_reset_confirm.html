{% extends "shop/base.html" %}
{% load static %}

{% block content %}
<div class="background-image login">
  <div class="d-flex align-items-center justify-content-start max-vh-100">
    <div class="container">
      <div class="row" style="margin-left:0;">
        <div class="col-md-6 d-flex flex-column justify-content-center text-center"
             style="min-height: 100vh; background-color: rgba(128,128,128,0.85);
                    border: solid 1px black; border-radius: 10px; padding: 30px;
                    font-family: fantasy;">
          <h3 class="mb-4">Reset Your Password</h3>

          {% if validlink %}
          <form method="post" class="text-start">
            {% csrf_token %}
            <div class="mb-3">
              <label for="{{ form.new_password1.id_for_label }}" class="form-label">New password</label>
              {{ form.new_password1 }}
              {% if form.new_password1.errors %}
                <div class="text-danger small">{{ form.new_password1.errors }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.new_password2.id_for_label }}" class="form-label">Confirm new password</label>
              {{ form.new_password2 }}
              {% if form.new_password2.errors %}
                <div class="text-danger small">{{ form.new_password2.errors }}</div>
              {% endif %}
            </div>

            <button type="submit" class="btn btn-primary w-100 mt-3">Reset Password</button>
          </form>
          {% else %}
          <p class="text-danger">This password reset link is invalid or has expired.</p>
          <a href="{% url 'password_reset' %}" class="btn btn-primary w-100 mt-3">Request New Link</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

